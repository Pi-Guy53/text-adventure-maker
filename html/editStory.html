<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit story</title>

    <link rel="stylesheet" href="../css/edit-style.css">

    <script src="https://pixijs.download/release/pixi.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="favicon-v1.png">
</head>

<body>
    <header>
        <!-- <h1>Story Plots</h1>
        <h3>The web-app</h3> -->
        <h2 class="story-name">Display name</h2>
    </header>

    <main>

        <div id="main-grid">
            <!-- <input type="submit" class="btn" id="newPlot" name="newPlot" value="[+] Create new Plot" onclick="addPlot()"> -->
            <!-- <input type="submit" class="btn" id="preview" name="preview" value="Compile preview" onclick="setPreview()"> -->

            <a id="back2Main" class="btn" href="../index.html">Back to Story Select</a>
            <input type="submit" class="btn" id="load" name="load" value="Reset to last Save" onclick="loadFromSave()">

            <a class="btn" id="toPreview" href="showStory.html">Play Story</a>

            <input type="submit" class="btn" id="save" name="save" value="Save" onclick="save(true)">
            <input type="submit" class="btn" id="download" name="download" value="Download save"
                onclick="downloadSave()">

            <p id="help">
                Right click on the lower stage to open your editing menu. <br>
                <img src="../img/tutorial.png" width="200">
            </p>

            <div class="modalDialog">
                <!-- <p id="modalTitle"></p> -->
                <input type="text" id="modalTitle" name="modalTitle" value=""
                    placeholder="Title, used for selecting plots, cannot be empty, must be unique" onclick="select()">

                <textarea id="modalText" name="modalText" rows="25" placeholder="write some text...
using <<display text::plot title>> will allow you to create a link between plots.
clicking the 'display text' will take to user to the plot titled 'plot title' 
<<, >>, and :: are reserved character configurations (subject to change)"></textarea>
                <input type="button" id="modalButton-save" name="modalButton-save" value="Save and Close">
                <input type="button" id="modalButton-cancel" name="modalButton-cancel" value="Close without saving">

            </div>

            <div class="savePopUp-hidden">
                Saved
            </div>

            <div class="context-wrapper-hidden">
                <div class="context-content">
                    <ul class="context-menu">
                        <li class="context-menu-item">
                            <div onclick="contextNew(event)">New</div>
                        </li>
                        <li class="context-menu-item">
                            <div onclick="contextDuplicate()">Duplicate</div>
                        </li>
                        <li class="context-menu-item">
                            <div onclick="contextEdit()">Edit</div>
                        </li>
                        <li class="context-menu-item">
                            <div onclick="contextDelete()">Delete</div>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="text-wrapper">
                <h3>{] Story Preview [}</h3>
                <h1 id="text-title"> Header</h1>
                <p id="text-content">
                    Content
                </p>
            </div>

            <input id="dropzone" type="file" accept=".plothole" value="Drop save files here" onchange="droppedFile()">
            <p class='dropzone-error-hidden'> <br> <span></span></p>
            <p id="dropzone-overlay">Drop a previously saved file here to load</p>

        </div>

        <div title="Right click to open the edit menu">
            <script>
                let app = new PIXI.Application({
                    width: 1600,
                    height: 900,
                    backgroundColor: 0xc79f6b
                }); // 16:9 * 100

                app.view.id = "stage";
                document.body.appendChild(app.view);
            </script>
        </div>
    </main>

    <footer>
        &copy; 2023 UsrnGamesInc, All Rights Reserved
    </footer>

    <script src="../js/Plot.js"></script>
    <script src="../js/main.js"></script>

    <script>
        initAllStories();
        loadStory();
        save(false);
    </script>

</body>

</html>